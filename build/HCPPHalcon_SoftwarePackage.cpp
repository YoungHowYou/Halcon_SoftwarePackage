/***********************************************************
 * File generated by the HALCON-Compiler hcomp version 23.11
 * Usage: Interface to C++
 *
 * Software by: MVTec Software GmbH, www.mvtec.com
 ***********************************************************/


#ifndef __APPLE__
#  include "halconcpp/HalconCpp.h"
#  include "halconcpp/HalconAPI.h"
#else
#  ifndef HC_LARGE_IMAGES
#    include <HALCONCpp/HalconCpp.h>
#    include <HALCONCpp/HalconAPI.h>
#  else
#    include <HALCONCppxl/HalconCpp.h>
#    include <HALCONCppxl/HalconAPI.h>
#  endif
#endif

#include "HCPPHalcon_SoftwarePackage.h"

extern "C" HUserImport int HHalcon_SoftwarePackageGetOffset();

int offset = -1;

using namespace HalconCpp;

Hproc_handle PreCallUser(int proc_index_local)
{
  if (offset < 0)
  {
    /* First use of this extension package, query my offset */
    offset = HHalcon_SoftwarePackageGetOffset();
    if (offset < 0)
    {
      /* HALCON library not initialized (extension package as first usage). */
      /* Trigger initialization by touching system operator and try again. */
      Hproc_handle tmp = HalconAPI::PreCall(0);
      HalconAPI::PostCall(tmp);
      offset = HHalcon_SoftwarePackageGetOffset();
      if (offset < 0)
      {
        /* Ok, so something is *really* wrong */
        HOperatorException::Throw(proc_index_local,H_ERR_UEXTNI);
      }
    }
  }
  return HalconAPI::PreCall(offset + proc_index_local);
}




#ifdef Sqlite3LoadOrSaveDb
# error An existing macro name conflicts with Sqlite3LoadOrSaveDb
#endif
HUserExport void HalconCpp::Sqlite3LoadOrSaveDb(const HTuple& DbNumber, const HTuple& zFilename, const HTuple& isSave)
{
  Hproc_handle proc = PreCallUser(0);
  HalconAPI::Store(proc,0,DbNumber);
  HalconAPI::StoreEnc(proc,1,zFilename);
  HalconAPI::Store(proc,2,isSave);
  HalconAPI::CallProcedure(proc);
  HalconAPI::PostCall(proc);
}

#ifdef Sqlite3Exec
# error An existing macro name conflicts with Sqlite3Exec
#endif
HUserExport void HalconCpp::Sqlite3Exec(const HTuple& DbNumber, const HTuple& sql, HTuple* errmsg)
{
  Hproc_handle proc = PreCallUser(1);
  HalconAPI::Store(proc,0,DbNumber);
  HalconAPI::StoreEnc(proc,1,sql);
  HalconAPI::InitOutp(proc,0);
  HalconAPI::CallProcedure(proc);
  HalconAPI::LoadEnc(proc,0,errmsg);
  HalconAPI::PostCall(proc);
}

#ifdef Sqlite3GetTable
# error An existing macro name conflicts with Sqlite3GetTable
#endif
HUserExport void HalconCpp::Sqlite3GetTable(const HTuple& DbNumber, const HTuple& sql, HTuple* table_names, HTuple* X, HTuple* Y, HTuple* errmsg)
{
  Hproc_handle proc = PreCallUser(2);
  HalconAPI::Store(proc,0,DbNumber);
  HalconAPI::StoreEnc(proc,1,sql);
  HalconAPI::InitOutp(proc,0);
  HalconAPI::InitOutp(proc,1);
  HalconAPI::InitOutp(proc,2);
  HalconAPI::InitOutp(proc,3);
  HalconAPI::CallProcedure(proc);
  try
  {
    HalconAPI::LoadEnc(proc,0,table_names);
    HalconAPI::Load(proc,1,X);
    HalconAPI::Load(proc,2,Y);
    HalconAPI::LoadEnc(proc,3,errmsg);
  }
  catch (...)
  {
    if (table_names)
      table_names->Clear();
    if (X)
      X->Clear();
    if (Y)
      Y->Clear();
    if (errmsg)
      errmsg->Clear();
    throw;
  }
  HalconAPI::PostCall(proc);
}

#ifdef Sqlite3Close
# error An existing macro name conflicts with Sqlite3Close
#endif
HUserExport void HalconCpp::Sqlite3Close(const HTuple& DbNumber)
{
  Hproc_handle proc = PreCallUser(3);
  HalconAPI::Store(proc,0,DbNumber);
  HalconAPI::CallProcedure(proc);
  HalconAPI::PostCall(proc);
}

#ifdef Sqlite3Open
# error An existing macro name conflicts with Sqlite3Open
#endif
HUserExport void HalconCpp::Sqlite3Open(const HTuple& filename, HTuple* DbNumber)
{
  Hproc_handle proc = PreCallUser(4);
  HalconAPI::StoreEnc(proc,0,filename);
  HalconAPI::InitOutp(proc,0);
  HalconAPI::CallProcedure(proc);
  HalconAPI::Load(proc,0,DbNumber);
  HalconAPI::PostCall(proc);
}

